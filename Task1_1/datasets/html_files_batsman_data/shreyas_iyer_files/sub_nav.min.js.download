function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args)}}window.espni=window.espni||{};window.espni.secNav=function(win,$,undefined){var VERSION="1.1.0";var conf,cache;function init(){conf={mainNavWrap:"#mainnav_wrap",secNav:"#subnav_tier1",secNavSmallWrap:"#secnav_wrap_small",secNavBtn:"#secnav_btn",ddWrap:".dd_wrap",navMask:"#secnav_mask",activeClass:"active",navSlide:"secnav_slide",viewport:"#viewport"};cache={bodyContent:$("body").not("#mainnav_wrap_small, #secnav_wrap_small"),$mainNavWrap:$(conf.mainNavWrap),$secNav:$(conf.secNav),$secNavSmallWrap:$(conf.secNavSmallWrap)};cache.$secNavBtn=cache.$secNavSmallWrap.find(conf.secNavBtn);cache.$navMask=cache.$secNavSmallWrap.find(conf.navMask);cache.$secNavSmallWrap.appendTo("body");cache.$secNav.clone().appendTo(cache.$secNavSmallWrap);cache.$secNavBtn.appendTo(cache.$mainNavWrap);bindEvents()}function bindEvents(){cache.$mainNavWrap.on("click","#secnav_btn",function(e){e.stopPropagation();$("html").toggleClass(conf.navSlide);if(!$("#viewport").size()){$("body").append('<div id="viewport"></div>');$("#viewport").append(cache.bodyContent)}$("#viewport").height($(win).height())});cache.$secNavSmallWrap.on("click",conf.navMask,function(e){e.stopPropagation();$("html").removeClass(conf.navSlide);$("#viewport").height("auto").width("auto")});cache.$secNavSmallWrap.find("li").each(function(){var _item=$(this);if(_item.find("ul").size()){_item.addClass("hasSub")}});cache.$secNavSmallWrap.on("click","li.hasSub > a",function(e){e.preventDefault();$(this).parent("li").toggleClass(conf.activeClass)})}function initMoreDD(){var $ciSecNav=$(".sub-nav"),maxItem,itemTotalWidth=100;if($ciSecNav.size()){var secNavWidth=cache.$secNav.css({overflow:"hidden"}).innerWidth(),$subnavTop=cache.$secNav.find("> li"),$moreNavWrap=$('<li class="more_navwrap"></li>'),$moreBtn=$('<span class="more_navbtn" id="more_navbtn">More<i class="sp sp_arr"></i></span>'),$moreDD=$('<ul class="more_nav"></ul>');cache.$secNav.css("overflow","visible");cache.$secNav.find(">li").each(function(i){var _li=$(this);itemTotalWidth+=_li.outerWidth();if(itemTotalWidth<secNavWidth){maxItem=i+1}});if(maxItem<$subnavTop.size()){$moreDD.append($subnavTop.slice(maxItem,$subnavTop.size())).appendTo($moreNavWrap);$moreNavWrap.prepend($moreBtn).appendTo(cache.$secNav);$moreBtn.on("click",function(e){e.stopPropagation();$moreNavWrap.toggleClass("open");!$ciSecNav.hasClass("loaded")&&$ciSecNav.addClass("loaded")});$moreNavWrap.on("mouseleave",function(e){$moreNavWrap.removeClass("open")})}}$(window).on("orientationchange",function(){if(!$ciSecNav.hasClass("rotation-load")&&window.innerWidth>=768){initMoreDD();$ciSecNav.addClass("rotation-load")}})}function ulWidth(){if(isMobile.phone==true||isMobile.tablet===true||$(window).innerWidth()<1024){$(".subnav-item-wrap").each(function(){var subnav_module=$(this),li_width=0,ul_margin=10;$(">li",subnav_module).each(function(){li_width+=$(this).outerWidth(true)});subnav_module.css("width",li_width+ul_margin)})}}function initAPI(){if($(".subnav-item-wrap").size()){init();if(window.innerWidth>1024){initMoreDD()}else{ulWidth()}}}return{init:initAPI,VERSION:VERSION}}(window,jQuery);$(function(){window.espni.secNav.init();window.openS=function(URL,WindowName){window.open(URL,WindowName,"toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no,copyhistory=no,titlebar=0,width=550,height=505");if(openS.opener==null)openS.opener=window;openS.opener.name="opener"}});